<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>
        
            JavaScript奇技淫巧45招 |
        －木马人－    
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta http-equiv="cache-control" content="max-age=7200">
    <!-- 禁止百度微信转码（移动端还有点人性，哈哈） -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- 作者 -->
    <meta name="author" content="Nokey-木马人">
    <meta name="baidu-site-verification" content="lmqYZpJ2tZ" />
    <link rel="icon" type="image/x-icon" href="/image/king.png">
    <link rel="stylesheet" href="/css/blog.css" type="text/css">

    <link rel="stylesheet" href="/css/post.css" type="text/css">

    <link rel="stylesheet" href="/css/noookey.css" type="text/css">

    <link rel="stylesheet" href="/css/highlight.css" type="text/css">

  </head>
<body>
    <div id='wx_pic' style='margin:0 auto;display:none;'>
    <img src='/image/nokey.png'/>
</div>
<header>
    <i class="left">
        <span class="dash-left transition">--</span>
        <span class="word-w transition">W</span>
        <span class="word-e transition">e</span>
        <span class="word-l transition">l</span>
        <span class="word-c transition">c</span>
        <span class="word-o transition">o</span>
        <span class="word-m transition">m</span>
        <span class="word-e transition">e </span>
        <span class="word-t transition">t</span>
        <span class="word-o transition">o </span>
    </i>
    <a href="/pages/shanghai"><span class="word-n transition">N</span></a>
    <span class="word-o transition">o</span>
    <span class="word-k transition">k</span>
    <span class="word-e transition">e</span>
    <span class="word-y transition">y</span>
    <span class="word-_ transition">_</span>
    <span class="word-b transition">b</span>
    <span class="word-l transition">l</span>
    <span class="word-o transition">o</span>
    <span class="word-g transition">g </span>
    <i class="right">
        <span class="dash-right transition">--</span>
    </i>
    
    <p class="home">
        <a href="/" title="Return Home">
            <i class="icon-home transition" alt="Return Home"></i>
        </a>
    </p>
</header>
<div class="yellow-progress-bar progress-move"></div>
    <div class="main">
        <div class="one">
  <a href="http://blog.nokey.me/2015/01/07/JavaScript奇技淫巧45招/">
    <h1 class="p-title transition">JavaScript奇技淫巧45招</h1>
</a>

  <div class="micro-data clearfix">
    <div class="date-wrap wrap">
        <i class="icon-calendar"></i>
        <span class="date">1月 7 2015</span>
    </div>
    <div class="tag-wrap wrap">
        
    <i class="icon-tag"></i>
    <a class="post-link" href="/tags/javascript/">javascript</a>&nbsp;&nbsp;<a class="post-link" href="/tags/翻译/">翻译</a>&nbsp;&nbsp;<a class="post-link" href="/tags/转载/">转载</a>

    </div>
</div>

  <div class="content">
    
        <p><strong>这篇文章是根据<em>@不可能不确定</em>翻译的一篇外文修改而来，以供自己和大家共同学习，并收藏以供日后参考。</strong></p>
<ul>
<li>@不可能不确定 <a href="http://chensd.com/2015-01/45-useful-javascript-tips-tricks-and-best-practices.html" target="_blank" rel="external">译文</a></li>
<li>原文：<a href="http://modernweb.com/2013/12/23/45-useful-javascript-tips-tricks-and-best-practices/" target="_blank" rel="external">45 Useful JavaScript Tips, Tricks and Best Practices</a></li>
<li>作者：<a href="http://modernweb.com/authors/saad-mousliki/" target="_blank" rel="external">Saad Mousliki</a></li>
</ul>
<p>JavaScript是一个绝冠全球的编程语言，可用于Web开发、移动应用开发（<a href="http://phonegap.com/" target="_blank" rel="external">PhoneGap</a>、<a href="http://www.appcelerator.com/" target="_blank" rel="external">Appcelerator</a>）、服务器端开发（<a href="http://nodejs.org/" target="_blank" rel="external">Node.js</a>和<a href="http://wakanda.org/" target="_blank" rel="external">Wakanda</a>）等等。JavaScript还是很多新手踏入编程世界的第一个语言。既可以用来显示浏览器中的简单提示框，也可以通过<a href="http://nodebots.io/" target="_blank" rel="external">nodebot</a>或<a href="http://semu.github.io/noduino/" target="_blank" rel="external">nodruino</a>来控制机器人。能够编写结构清晰、性能高效的JavaScript代码的开发人员，现如今已成了招聘市场最受追捧的人。</p>
<a id="more"></a>
<p>在这篇文章里，我将分享一些JavaScript的技巧、秘诀和最佳实践，除了少数几个外，不管是浏览器的JavaScript引擎，还是服务器端JavaScript解释器，均适用。</p>
<p>本文中的示例代码，通过了在Google Chrome 30最新版（V8 3.20.17.15）上的测试。</p>
<h3 id="1、首次为变量赋值时务必使用var关键字">1、首次为变量赋值时务必使用var关键字</h3>
<p>变量没有声明而直接赋值得话，默认会作为一个新的全局变量，要尽量避免使用全局变量。</p>
<h3 id="2、使用_===_取代_==">2、使用 === 取代 ==</h3>
<p>== 和 != 操作符会在需要的情况下自动转换数据类型，但 === 和 !== 不会，它们会同时比较值和数据类型，这也使得它们要比 == 和 != 快。</p>
<figure class="highlight javascript"><pre><div class="line">[<span class="number">10</span>] === <span class="number">10</span>    <span class="comment">// is false</span></div><div class="line">[<span class="number">10</span>]  == <span class="number">10</span>    <span class="comment">// is true</span></div><div class="line"><span class="string">'10'</span> == <span class="number">10</span>     <span class="comment">// is true</span></div><div class="line"><span class="string">'10'</span> === <span class="number">10</span>    <span class="comment">// is false</span></div><div class="line">[]   == <span class="number">0</span>     <span class="comment">// is true</span></div><div class="line">[] ===  <span class="number">0</span>     <span class="comment">// is false</span></div><div class="line"><span class="string">''</span> == <span class="literal">false</span>   <span class="comment">// is true but true == "a" is false</span></div><div class="line"><span class="string">''</span> === <span class="literal">false</span>  <span class="comment">// is false</span></div></pre></figure>

<h3 id="3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false。（NaN_===_NaN也是false）">3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false。（NaN === NaN也是false）</h3>
<h3 id="4、行尾使用分号">4、行尾使用分号</h3>
<p>实践中最好还是使用分号，忘了写也没事，大部分情况下JavaScript解释器都会自动添加。对于为何要使用分号，可参考文章<a href="http://davidwalsh.name/javascript-semicolons" target="_blank" rel="external">JavaScript中关于分号的真相</a>。</p>
<h3 id="5、创建一个对象的构造函数">5、创建一个对象的构造函数</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(firstName, lastName)</span></span>{</div><div class="line">    <span class="keyword">this</span>.firstName =  firstName;</div><div class="line">    <span class="keyword">this</span>.lastName = lastName;</div><div class="line">}</div><div class="line"><span class="keyword">var</span> Saad = <span class="keyword">new</span> Person(<span class="string">"Saad"</span>, <span class="string">"Mousliki"</span>);</div></pre></figure>

<h3 id="6、小心使用typeof、instanceof和contructor">6、小心使用typeof、instanceof和contructor</h3>
<ul>
<li>typeof：JavaScript一元操作符，用于以字符串的形式返回变量的原始类型，注意，typeof null也会返回object，大多数的对象类型（数组Array、时间Date等）也会返回object</li>
<li>instanceof：内部原型属性，可以通过代码重写</li>
<li>contructor：JavaScript操作符，会在原型链中的构造器中搜索，找到则返回true，否则返回false</li>
</ul>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</div><div class="line"><span class="keyword">typeof</span> arr;   <span class="comment">// 返回 "object" </span></div><div class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></div><div class="line">arr.constructor();  <span class="comment">//[]</span></div></pre></figure>

<h3 id="7、创建自调用函数">7、创建自调用函数</h3>
<p>函数在创建之后直接自动执行，通常称之为自调用匿名函数（Self-Invoked Anonymous Function）或直接调用函数表达式（Immediately Invoked Function Expression ）。格式如下：</p>
<figure class="highlight javascript"><pre><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">    <span class="comment">// 置于此处的代码将自动执行</span></div><div class="line">})();  </div><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span>{</div><div class="line">    <span class="keyword">var</span> result = a+b;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">})(<span class="number">10</span>,<span class="number">20</span>)</div></pre></figure>

<h3 id="8、从数组中随机获取成员">8、从数组中随机获取成员</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> , <span class="string">'a'</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">'foo'</span> , <span class="number">8852</span>, , <span class="string">'Doe'</span> , <span class="number">2145</span> , <span class="number">119</span>];</div><div class="line"><span class="keyword">var</span>  randomItem = items[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * items.length)];</div></pre></figure>

<h3 id="9、获取指定范围内的随机数">9、获取指定范围内的随机数</h3>
<p>这个功能在生成测试用的假数据时特别有用，比如介与指定范围内的工资数。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</div></pre></figure>

<h3 id="10、生成从0到指定最大值的数字数组">10、生成从0到指定最大值的数字数组</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> numbersArray = [] , max = <span class="number">100</span>;</div><div class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">1</span>; numbersArray.push(i++) &lt; max;);  <span class="comment">// numbers = [1,2,3 ... 100]</span></div></pre></figure>

<h3 id="11、生成随机的字母和数字组成的字符串（没想到toString还有这等强大的功能）">11、生成随机的字母和数字组成的字符串（没想到<em>toString</em>还有这等强大的功能）</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateRandomAlphaNum</span><span class="params">(len)</span> </span>{</div><div class="line">    <span class="keyword">var</span> rdmString = <span class="string">""</span>;</div><div class="line">    <span class="keyword">for</span>( ; rdmString.length &lt; len; rdmString  += <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>));</div><div class="line">    <span class="keyword">return</span>  rdmString.substr(<span class="number">0</span>, len);</div><div class="line">}</div></pre></figure>

<h3 id="12、对数字数组进行随机排序">12、对数字数组进行随机排序</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>];</div><div class="line">numbers = numbers.sort(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{ <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>});</div><div class="line"><span class="comment">/* numbers 数组将类似于 [120, 5, 228, -215, 400, 458, -85411, 122205]  */</span></div></pre></figure>

<p>这里使用了JavaScript内置的数组排序函数，更好的办法是用专门的代码来实现（如Fisher-Yates算法），可以参见StackOverFlow上的<a href="http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890#962890" target="_blank" rel="external">这个讨论</a>。</p>
<h3 id="13、字符串去除首尾空格">13、字符串去除首尾空格</h3>
<p>Java、C#和PHP等语言都实现了专门的字符串去空格函数，但JavaScript中是没有的，可以通过下面的代码来为String对象函数一个trim函数：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>);};</div></pre></figure>

<p>新的JavaScript引擎已经有了trim()的原生实现。</p>
<h3 id="14、两个数组和合并">14、两个数组和合并</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> array1 = [<span class="number">12</span> , <span class="string">"foo"</span> , {name <span class="string">"Joe"</span>} , -<span class="number">2458</span>];</div><div class="line"><span class="keyword">var</span> array2 = [<span class="string">"Doe"</span> , <span class="number">555</span> , <span class="number">100</span>];</div><div class="line"><span class="built_in">Array</span>.prototype.push.apply(array1, array2);</div><div class="line"><span class="comment">/* array1 值为  [12 , "foo" , {name "Joe"} , -2458 , "Doe" , 555 , 100] */</span></div></pre></figure>

<h3 id="15、将实参对象arguments转换为数组">15、将实参对象<strong>arguments</strong>转换为数组</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> argArray = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div></pre></figure>

<h3 id="16、验证是否是数字">16、验证是否是数字</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span><span class="params">(n)</span></span>{</div><div class="line">    <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) && <span class="built_in">isFinite</span>(n);</div><div class="line">}</div></pre></figure>

<h3 id="17、验证是否是数组">17、验证是否是数组</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span><span class="params">(obj)</span></span>{</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span> ;</div><div class="line">}</div></pre></figure>

<p>但如果toString()方法被重写过得话，就行不通了。也可以使用下面的方法：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="built_in">Array</span>.isArray(obj); <span class="comment">// its a new Array method</span></div></pre></figure>

<p>如果在浏览器中没有使用frame，还可以用instanceof，但如果上下文太复杂，也有可能出错。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> myFrame = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</div><div class="line"><span class="built_in">document</span>.body.appendChild(myFrame);</div><div class="line"><span class="keyword">var</span> myArray = <span class="built_in">window</span>.frames[<span class="built_in">window</span>.frames.length-<span class="number">1</span>].Array;</div><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> myArray(a,b,<span class="number">10</span>); <span class="comment">// [a,b,10]  </span></div><div class="line"><span class="comment">// myArray 的构造器已经丢失，instanceof 的结果将不正常</span></div><div class="line"><span class="comment">// 构造器是不能跨 frame 共享的</span></div><div class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// false</span></div></pre></figure>

<h3 id="18、获取数字数组中的最大值和最小值">18、获取数字数组中的最大值和最小值</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span>  numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>]; </div><div class="line"><span class="keyword">var</span> maxInNumbers = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, numbers); </div><div class="line"><span class="keyword">var</span> minInNumbers = <span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, numbers);</div></pre></figure>

<h3 id="19、清空数组(_顺便总结一下高效清空数组的方法_)">19、清空数组( 顺便总结一下高效清空数组的方法 )</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> ];  </div><div class="line">myArray.length = <span class="number">0</span>; <span class="comment">// myArray will be equal to [].</span></div></pre></figure>

<blockquote>
<p>清空数组还有几个其他的方法，谁能想到最高效的竟是使用 pop() 方法：while(A.length){ A.pop(); }。还有一个方法比较高效：A = []；不过这种方法要很小心使用，容易造成 Memory Leak（内存泄漏），大家可以参考<a href="https://stackoverflow.com/questions/1232040/empty-an-array-in-javascript" target="_blank" rel="external">stackoverflow上的一个回答</a></p>
</blockquote>
<h3 id="20、不要使用delete来删除数组中的某个项">20、不要使用delete来删除数组中的某个项</h3>
<p>如果对数组元素直接使用delete，其实并没有删除，只是将元素置为了undefined。数组元素删除应使用splice。</p>
<p>不要这样：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> ,<span class="string">'a'</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">'foo'</span> , <span class="number">8852</span>, , <span class="string">'Doe'</span> ,<span class="number">2154</span> , <span class="number">119</span> ]; </div><div class="line">items.length; <span class="comment">// return 11 </span></div><div class="line"><span class="keyword">delete</span> items[<span class="number">3</span>]; <span class="comment">// return true </span></div><div class="line">items.length; <span class="comment">// return 11 </span></div><div class="line"><span class="comment">/* items 结果为 [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154, 119] */</span></div></pre></figure>

<p>而应该这样：</p>
<figure class="highlight javacript"><pre><div class="line">var items = [<span class="number">12</span>, <span class="number">548</span> ,'<span class="literal">a</span>' , <span class="number">2</span> , <span class="number">5478</span> , 'foo' , <span class="number">8852</span>, , 'Doe' ,<span class="number">2154</span> , <span class="number">119</span> ]<span class="comment">; </span></div><div class="line">items.length<span class="comment">; // return 11 </span></div><div class="line">items.splice(<span class="number">3</span>,<span class="number">1</span>) <span class="comment">; </span></div><div class="line">items.length<span class="comment">; // return 10 </span></div><div class="line">/* items 结果为 [<span class="number">12</span>, <span class="number">548</span>, <span class="string">"a"</span>, <span class="number">5478</span>, <span class="string">"foo"</span>, <span class="number">8852</span>, undefined × <span class="number">1</span>, <span class="string">"Doe"</span>, <span class="number">2154</span>, <span class="number">119</span>]</div></pre></figure>

<blockquote>
<p>splice也能清空数组，但是它会返回被删除项，所以不是很高效：A.splice(0,A.length)</p>
</blockquote>
<p>删除对象的属性时可以使用delete。</p>
<h3 id="21、使用length属性截断数组">21、使用length属性截断数组</h3>
<p>前面的例子中用length属性清空数组，同样还可用它来截断数组：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> , <span class="number">124</span> , <span class="number">98</span> , <span class="number">10</span> ];  </div><div class="line">myArray.length = <span class="number">4</span>; <span class="comment">// myArray will be equal to [12 , 222 , 1000 , 124].</span></div></pre></figure>

<p>与此同时，如果把length属性变大，数组的长度值便会增加，会使用undefined来作为新的元素填充。length是一个可写的属性。</p>
<figure class="highlight javascript"><pre><div class="line">myArray.length = <span class="number">10</span>; <span class="comment">// the new array length is 10 </span></div><div class="line">myArray[myArray.length - <span class="number">1</span>] ; <span class="comment">// undefined</span></div></pre></figure>

<h3 id="22、在条件中使用逻辑与或">22、在条件中使用逻辑与或</h3>
<figure class="highlight javacript"><pre><div class="line">var foo = <span class="number">10</span>;  </div><div class="line">foo == <span class="number">10</span> && <span class="keyword">do</span>Something(); // is the same thing as <span class="keyword">if</span> (foo == <span class="number">10</span>) <span class="keyword">do</span>Something(); </div><div class="line">foo == <span class="number">5</span> || <span class="keyword">do</span>Something(); // is the same thing as <span class="keyword">if</span> (foo != <span class="number">5</span>) <span class="keyword">do</span>Something();</div></pre></figure>

<p>逻辑或还可用来设置默认值，比如函数参数的默认值。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span><span class="params">(arg1)</span></span>{ </div><div class="line">    arg1 = arg1 || <span class="number">10</span>; <span class="comment">// arg1 will have 10 as a default value if it’s not already set</span></div><div class="line">}</div></pre></figure>

<blockquote>
<p>这就是传说中的<em>开关短路</em>特性，还有三元运算符：<em> ? : </em></p>
</blockquote>
<h3 id="23、使得map()函数方法对数据循环">23、使得map()函数方法对数据循环</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> squares = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].map(<span class="function"><span class="keyword">function</span> <span class="params">(val)</span> </span>{  </div><div class="line">    <span class="keyword">return</span> val * val;  </div><div class="line">}); </div><div class="line"><span class="comment">// squares will be equal to [1, 4, 9, 16]</span></div></pre></figure>

<blockquote>
<p>数组还有一些常用的方法：join()、slice()、pop()、push()、sort()…split()是字符串的方法哦！</p>
</blockquote>
<h3 id="24、保留指定小数位数">24、保留指定小数位数</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> num =<span class="number">2.443242342</span>;</div><div class="line">num = num.toFixed(<span class="number">4</span>);  <span class="comment">// num will be equal to 2.4432</span></div></pre></figure>

<p>注意，toFixed()返回的是字符串，不是数字。</p>
<h3 id="25、浮点计算的问题">25、浮点计算的问题</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span> <span class="comment">// is false </span></div><div class="line"><span class="number">9007199254740992</span> + <span class="number">1</span> <span class="comment">// is equal to 9007199254740992</span></div><div class="line"><span class="number">9007199254740992</span> + <span class="number">2</span> <span class="comment">// is equal to 9007199254740994</span></div></pre></figure>

<p>Why？因为0.1+0.2等于0.30000000000000004。JavaScript的数字都遵循IEEE 754标准构建，在内部都是64位浮点小数表示，具体可以参见<a href="http://www.2ality.com/2012/04/number-encoding.html" target="_blank" rel="external">JavaScript中的数字是如何编码的</a>.（ 很不错的一篇文章表述的很详细 ）</p>
<p>可以通过使用<em>toFixed()</em>和<em>toPrecision()</em>来解决这个问题。</p>
<blockquote>
<p>简单的计算可以这样：var n = 0.1 + 0.2; n.toFixed(1) == 0.3;  // =&gt; true</p>
</blockquote>
<h3 id="26、通过for-in循环检查对象的属性">26、通过for-in循环检查对象的属性</h3>
<p>下面这样的用法，可以防止迭代的时候进入到对象的原型属性中。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> object) {  </div><div class="line">    <span class="keyword">if</span> (object.hasOwnProperty(name)) { </div><div class="line">        <span class="comment">// do something with name</span></div><div class="line">    }  </div><div class="line">}</div></pre></figure>

<h3 id="27、逗号操作符">27、逗号操作符</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">0</span>; </div><div class="line"><span class="keyword">var</span> b = ( a++, <span class="number">99</span> ); </div><div class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// a will be equal to 1 </span></div><div class="line"><span class="built_in">console</span>.log(b);  <span class="comment">// b is equal to 99</span></div></pre></figure>

<blockquote>
<p>逗号运算符会从左向右依次计算各个表达式，然后返回最右边表达式的值</p>
</blockquote>
<h3 id="28、对计算和查询的变量进行缓存">28、对计算和查询的变量进行缓存</h3>
<p>在使用jQuery选择器的情况下，我们可以缓存DOM对象</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> navright = <span class="built_in">document</span>.querySelector(<span class="string">'#right'</span>); </div><div class="line"><span class="keyword">var</span> navleft = <span class="built_in">document</span>.querySelector(<span class="string">'#left'</span>); </div><div class="line"><span class="keyword">var</span> navup = <span class="built_in">document</span>.querySelector(<span class="string">'#up'</span>); </div><div class="line"><span class="keyword">var</span> navdown = <span class="built_in">document</span>.querySelector(<span class="string">'#down'</span>);</div></pre></figure>

<p>其实更常用的是：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> navright = $(<span class="string">'#right'</span>);</div></pre></figure>

<h3 id="29、提前检查传入isFinite()的参数">29、提前检查传入isFinite()的参数</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="built_in">isFinite</span>(<span class="number">0</span>/<span class="number">0</span>) ; <span class="comment">// false</span></div><div class="line"><span class="built_in">isFinite</span>(<span class="string">"foo"</span>); <span class="comment">// false</span></div><div class="line"><span class="built_in">isFinite</span>(<span class="string">"10"</span>); <span class="comment">// true</span></div><div class="line"><span class="built_in">isFinite</span>(<span class="number">10</span>);   <span class="comment">// true</span></div><div class="line"><span class="built_in">isFinite</span>(<span class="literal">undefined</span>);  <span class="comment">// false</span></div><div class="line"><span class="built_in">isFinite</span>();   <span class="comment">// false</span></div><div class="line"><span class="built_in">isFinite</span>(<span class="literal">null</span>);  <span class="comment">// true，这点当特别注意</span></div></pre></figure>

<h3 id="30、避免在数组中使用负数做索引">30、避免在数组中使用负数做索引</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> numbersArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line"><span class="keyword">var</span> from = numbersArray.indexOf(<span class="string">"foo"</span>) ;  <span class="comment">// from is equal to -1</span></div><div class="line">numbersArray.splice(from,<span class="number">2</span>);    <span class="comment">// will return [5]</span></div></pre></figure>

<p>注意传给splice的索引参数不要是负数，当是负数时，会从数组结尾处删除元素。</p>
<h3 id="31、用JSON来序列化与反序列化">31、用JSON来序列化与反序列化</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> person = {name :<span class="string">'Saad'</span>, age : <span class="number">26</span>, department : {ID : <span class="number">15</span>, name : <span class="string">"R&D"</span>} };</div><div class="line"><span class="keyword">var</span> stringFromPerson = <span class="built_in">JSON</span>.stringify(person);</div><div class="line"><span class="comment">/* stringFromPerson 结果为 "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&D"}}"   */</span></div><div class="line"><span class="keyword">var</span> personFromString = <span class="built_in">JSON</span>.parse(stringFromPerson);</div><div class="line"><span class="comment">/* personFromString 的值与 person 对象相同  */</span></div></pre></figure>

<h3 id="32、不要使用eval()或者函数构造器">32、不要使用eval()或者函数构造器</h3>
<p>eval()和函数构造器（Function consturctor）的开销较大，每次调用，JavaScript引擎都要将源代码转换为可执行的代码。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> func1 = <span class="keyword">new</span> <span class="built_in">Function</span>(functionCode);</div><div class="line"><span class="keyword">var</span> func2 = <span class="built_in">eval</span>(functionCode);</div></pre></figure>

<h3 id="33、避免使用with()">33、避免使用with()</h3>
<p>使用with()可以把变量加入到全局作用域中，因此，如果有其它的同名变量，一来容易混淆，二来值也会被覆盖。</p>
<h3 id="34、不要对数组使用for-in">34、不要对数组使用for-in</h3>
<p>避免：( for-in 的效率非常低。。。 )</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;  </div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arrayNumbers) {  </div><div class="line">    sum += arrayNumbers[i];  </div><div class="line">}</div></pre></figure>

<p>而应这样：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;  </div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arrayNumbers.length; i &lt; len; i++) {  </div><div class="line">    sum += arrayNumbers[i];  </div><div class="line">}</div></pre></figure>

<p>另外一个好处是，i和len两个变量是在for循环的第一个声明中，二者只会初始化一次，这要比下面这种写法快( 因为下面这种方法在每次循环的时候都会计算数组长度 )：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrayNumbers.length; i++)</div></pre></figure>

<p>NOTE : 这个问题在最新版本的 Javascript 引擎中被解决了</p>
<h3 id="35、传给setInterval()和setTimeout()时使用函数而不是字符串">35、传给setInterval()和setTimeout()时使用函数而不是字符串</h3>
<p>如果传给setTimeout()和setInterval()一个字符串，他们将会用类似于eval方式进行转换，这肯定会要慢些，因此不要使用：</p>
<figure class="highlight javascript"><pre><div class="line">setInterval(<span class="string">'doSomethingPeriodically()'</span>, <span class="number">1000</span>);  </div><div class="line">setTimeout(<span class="string">'doSomethingAfterFiveSeconds()'</span>, <span class="number">5000</span>);</div></pre></figure>

<p>而是用：</p>
<figure class="highlight javascript"><pre><div class="line">setInterval(doSomethingPeriodically, <span class="number">1000</span>);  </div><div class="line">setTimeout(doSomethingAfterFiveSeconds, <span class="number">5000</span>);</div></pre></figure>

<h3 id="36、使用switch/case代替一大叠的if/else（_关于这部分原文说的太简单，我在这做一下重构。。。_）">36、使用switch/case代替一大叠的if/else（ 关于这部分原文说的太简单，我在这做一下重构。。。 ）</h3>
<p>其实在Javascript中的条件处理有三种解决方案：<em>if-else-if</em>、<em>switch-case</em>、<em>Array Lookup</em>，分别介绍如下，我们先看一个复杂的 if－else ：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">if</span> (value == <span class="number">0</span>){</div><div class="line">    <span class="keyword">return</span> result0;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">1</span>){</div><div class="line">    <span class="keyword">return</span> result1;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">2</span>){</div><div class="line">    <span class="keyword">return</span> result2;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">3</span>){</div><div class="line">    <span class="keyword">return</span> result3;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">4</span>){</div><div class="line">    <span class="keyword">return</span> result4;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">5</span>){</div><div class="line">    <span class="keyword">return</span> result5;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">6</span>){</div><div class="line">    <span class="keyword">return</span> result6;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">7</span>){</div><div class="line">    <span class="keyword">return</span> result7;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">8</span>){</div><div class="line">    <span class="keyword">return</span> result8;</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">9</span>){</div><div class="line">    <span class="keyword">return</span> result9;</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">    <span class="keyword">return</span> result10;</div><div class="line">}</div></pre></figure>

<p>这段代码不禁要让人皱眉头，主要的问题是越深入的条件声明花费的计算时间越多，越多的条件将被计算。<em>value = 9</em> 的情况要比<em>value = 0</em>花费更多的时间，因为 value＝9 之前的条件都要被计算。如果示例条件里面的 value 的每个值出现的频率相对相同的话，示例中的代码还可以写成下面的样子：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">if</span> (value &lt; <span class="number">6</span>){</div><div class="line">    <span class="keyword">if</span> (value &lt; <span class="number">3</span>){</div><div class="line">        <span class="keyword">if</span> (value == <span class="number">0</span>){</div><div class="line">            <span class="keyword">return</span> result0;</div><div class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">1</span>){</div><div class="line">            <span class="keyword">return</span> result1;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> result2;</div><div class="line">        }</div><div class="line">    } <span class="keyword">else</span> {</div><div class="line">        <span class="keyword">if</span> (value == <span class="number">3</span>){</div><div class="line">            <span class="keyword">return</span> result3;</div><div class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">4</span>){</div><div class="line">            <span class="keyword">return</span> result4;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> result5;</div><div class="line">        }</div><div class="line">    }</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">    <span class="keyword">if</span> (value &lt; <span class="number">8</span>){</div><div class="line">        <span class="keyword">if</span> (value == <span class="number">6</span>){</div><div class="line">            <span class="keyword">return</span> result6;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> result7;</div><div class="line">        }</div><div class="line">    } <span class="keyword">else</span> {</div><div class="line">        <span class="keyword">if</span> (value == <span class="number">8</span>){</div><div class="line">            <span class="keyword">return</span> result8;</div><div class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (value == <span class="number">9</span>){</div><div class="line">            <span class="keyword">return</span> result9;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> result10;</div><div class="line">        }</div><div class="line"></div><div class="line">    }</div><div class="line">}</div></pre></figure>

<p>是不是让你想起了<strong>二叉树</strong>的算法了，哈哈。这算是对 <em>if-else优化</em> 的一种方案，然而，问题依然存在，额外的条件判断还会花费更多的时间，不仅是性能，代码的可维护性也会降低，该<strong>switch</strong>登场了，代码如下：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">switch</span>(value){</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> result0;</div><div class="line">    <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> result1;</div><div class="line">    <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">        <span class="keyword">return</span> result2;</div><div class="line">    <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">        <span class="keyword">return</span> result3;</div><div class="line">    <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">        <span class="keyword">return</span> result4;</div><div class="line">    <span class="keyword">case</span> <span class="number">5</span>:</div><div class="line">        <span class="keyword">return</span> result5;</div><div class="line">    <span class="keyword">case</span> <span class="number">6</span>:</div><div class="line">        <span class="keyword">return</span> result6;</div><div class="line">    <span class="keyword">case</span> <span class="number">7</span>:</div><div class="line">        <span class="keyword">return</span> result7;</div><div class="line">    <span class="keyword">case</span> <span class="number">8</span>:</div><div class="line">        <span class="keyword">return</span> result8;</div><div class="line">    <span class="keyword">case</span> <span class="number">9</span>:</div><div class="line">        <span class="keyword">return</span> result9;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> result10;</div><div class="line">}</div></pre></figure>

<p>在Javascript中，在只有<em>一两个条件</em>下，if语句通常快于switch，而且更优雅。但大于两个条件，而且条件语句是简单的（不是范围），switch 则更快。</p>
<p>另外一种选择：数组查询。当条件是一个数字并对应一个特定的结果，代码如下：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="comment">//define the array of results</span></div><div class="line"><span class="keyword">var</span> results = [result0, result1, result2, result3, result4, result5, result6,result7,result8, result9, result10];</div><div class="line"><span class="comment">//return the correct result</span></div><div class="line"><span class="keyword">return</span> results[value];</div></pre></figure>

<p>当条件是string的时候，你可以使用对象来存储结果。OK，到此就来做个大总结吧：</p>
<ol>
<li>使用<em>if-else</em>，当：<ul>
<li>不超过两个条件，每个条件都是独立的值（ a===5 or a===6 ）；</li>
<li>有大量的值可以放进区间里面（ a&lt;100 ）；</li>
</ul>
</li>
<li>使用<em>switch</em>，当：<ul>
<li>当条件数量大于2并小于等于10，每个条件都是独立的值；</li>
<li>不能用区间来表达条件，因为条件值是非线性的；</li>
</ul>
</li>
<li>使用<em>数组查询</em>，当：<ul>
<li>当条件大于10个的时候；</li>
<li>条件对应的结果是简单的值而不是一大堆语句。</li>
</ul>
</li>
</ol>
<h3 id="37、在switch/case中使用数字区间">37、在switch/case中使用数字区间</h3>
<p>其实，switch/case中的case条件，还可以这样写：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCategory</span><span class="params">(age)</span> </span>{  </div><div class="line">    <span class="keyword">var</span> category = <span class="string">""</span>;  </div><div class="line">    <span class="keyword">switch</span> (<span class="literal">true</span>) {  </div><div class="line">        <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):  </div><div class="line">            category = <span class="string">"not an age"</span>;  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        <span class="keyword">case</span> (age &gt;= <span class="number">50</span>):  </div><div class="line">            category = <span class="string">"Old"</span>;  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        <span class="keyword">case</span> (age &lt;= <span class="number">20</span>):  </div><div class="line">            category = <span class="string">"Baby"</span>;  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        <span class="keyword">default</span>:  </div><div class="line">            category = <span class="string">"Young"</span>;  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">    };  </div><div class="line">    <span class="keyword">return</span> category;  </div><div class="line">}  </div><div class="line">getCategory(<span class="number">5</span>);  <span class="comment">// 将返回 "Baby"</span></div></pre></figure>

<h3 id="38、使用对象作为对象的原型来创建对象">38、使用对象作为对象的原型来创建对象</h3>
<p>下面这样，便可以给定对象作为参数，来创建以此为原型的新对象：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span><span class="params">(object)</span> </span>{  </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">OneShotConstructor</span><span class="params">()</span></span>{}; </div><div class="line">    OneShotConstructor.prototype = object;  </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OneShotConstructor(); </div><div class="line">} </div><div class="line">clone(<span class="built_in">Array</span>).prototype ;  <span class="comment">// []</span></div></pre></figure>

<h3 id="39、HTML字段转换函数">39、HTML字段转换函数</h3>
<figure class="highlight javascript"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeHTML</span><span class="params">(text)</span> </span>{  </div><div class="line">    <span class="keyword">var</span> replacements= {<span class="string">"&lt;"</span>: <span class="string">"& lt;"</span>, <span class="string">"&gt;"</span>: <span class="string">"& gt;"</span>,<span class="string">"&"</span>: <span class="string">"& amp;"</span>, <span class="string">"\""</span>: <span class="string">"& quot;"</span>};</div><div class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/[&lt;&gt;&"]/g</span>, <span class="function"><span class="keyword">function</span><span class="params">(character)</span> </span>{  </div><div class="line">        <span class="keyword">return</span> replacements[character];  </div><div class="line">    }); </div><div class="line">}</div></pre></figure>

<h3 id="40、不要在循环内部使用try-catch-finally">40、不要在循环内部使用try-catch-finally</h3>
<p>try-catch-finally中catch部分在执行时会将异常赋给一个变量，这个变量会被构建成一个运行时作用域内的新的变量。</p>
<p>不要这样：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> object = [<span class="string">'foo'</span>, <span class="string">'bar'</span>], i, len;  </div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) {  </div><div class="line">    <span class="keyword">try</span> {  </div><div class="line">        <span class="comment">// do something that throws an exception </span></div><div class="line">    }  </div><div class="line">    <span class="keyword">catch</span> (e) {   </div><div class="line">        <span class="comment">// handle exception</span></div><div class="line">    } </div><div class="line">}</div></pre></figure>

<p>应该这样：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> object = [<span class="string">'foo'</span>, <span class="string">'bar'</span>], i, len;  </div><div class="line"><span class="keyword">try</span> { </div><div class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) {  </div><div class="line">        <span class="comment">// do something that throws an exception </span></div><div class="line">    } </div><div class="line">} </div><div class="line"><span class="keyword">catch</span> (e) {   </div><div class="line">    <span class="comment">// handle exception  </span></div><div class="line">}</div></pre></figure>

<h3 id="41、使用XMLHttpRequests时注意设置超时">41、使用XMLHttpRequests时注意设置超时</h3>
<p>XMLHttpRequests在执行时，当长时间没有响应（如出现网络问题等）时，应该中止掉连接，可以通过setTimeout()来完成这个工作：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest (); </div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{  </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.readyState == <span class="number">4</span>) {  </div><div class="line">        clearTimeout(timeout);  </div><div class="line">        <span class="comment">// do something with response data </span></div><div class="line">    }  </div><div class="line">}  </div><div class="line"><span class="keyword">var</span> timeout = setTimeout( <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{  </div><div class="line">    xhr.abort(); <span class="comment">// call error callback  </span></div><div class="line">}, <span class="number">60</span>*<span class="number">1000</span> <span class="comment">/* timeout after a minute */</span> ); </div><div class="line">xhr.open(<span class="string">'GET'</span>, url, <span class="literal">true</span>);  </div><div class="line">xhr.send();</div></pre></figure>

<p>同时需要注意的是，不要同时发起多个XMLHttpRequests请求。</p>
<h3 id="42、处理WebSocket的超时">42、处理WebSocket的超时</h3>
<p>通常情况下，WebSocket连接创建后，如果30秒内没有任何活动，服务器端会对连接进行超时处理，防火墙也可以对单位周期没有活动的连接进行超时处理。</p>
<p>为了防止这种情况的发生，可以每隔一定时间，往服务器发送一条空的消息。可以通过下面这两个函数来实现这个需求，一个用于使连接保持活动状态，另一个专门用于结束这个状态。</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> timerId = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">keepAlive</span><span class="params">()</span> </span>{ </div><div class="line">    <span class="keyword">var</span> timeout = <span class="number">15000</span>;  </div><div class="line">    <span class="keyword">if</span> (webSocket.readyState == webSocket.OPEN) {  </div><div class="line">        webSocket.send(<span class="string">''</span>);  </div><div class="line">    }  </div><div class="line">    timerId = setTimeout(keepAlive, timeout);  </div><div class="line">}  </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cancelKeepAlive</span><span class="params">()</span> </span>{  </div><div class="line">    <span class="keyword">if</span> (timerId) {  </div><div class="line">        cancelTimeout(timerId);  </div><div class="line">    }  </div><div class="line">}</div></pre></figure>

<p>keepAlive()函数可以放在WebSocket连接的onOpen()方法的最后面，cancelKeepAlive()放在onClose()方法的最末尾。</p>
<h3 id="43、时间注意原始操作符比函数调用快，使用VanillaJS">43、时间注意<a href="https://dev.opera.com/articles/efficient-javascript/?page=2#primitiveoperator" target="_blank" rel="external">原始操作符比函数调用快</a>，使用<a href="http://vanilla-js.com/" target="_blank" rel="external">VanillaJS</a></h3>
<p>比如，一般不要这样：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a,b); </div><div class="line">A.push(v);</div></pre></figure>

<p>可以这样来代替：</p>
<figure class="highlight javascript"><pre><div class="line"><span class="keyword">var</span> min = a &lt; b ? a : b; </div><div class="line">A[A.length] = v;</div></pre></figure>

<h3 id="44、开发时注意代码结构，上线前检查并压缩JavaScript代码">44、开发时注意代码结构，上线前检查并压缩JavaScript代码</h3>
<p>可以使用JSLint或JSMin等工具来检查并压缩代码。( 这个就算工程常态了吧。。。 )</p>
<h3 id="45、JavaScript博大精深，这里有些不错的学习资源">45、JavaScript博大精深，这里有些<a href="http://stackoverflow.com/questions/11246/best-resources-to-learn-javascript" target="_blank" rel="external">不错的学习资源</a></h3>
<ul>
<li>Code Academy资源：<a href="http://www.codecademy.com/tracks/javascript" target="_blank" rel="external">http://www.codecademy.com/tracks/javascript</a></li>
<li>Marjin Haverbekex编写的Eloquent JavaScript：<a href="http://eloquentjavascript.net/" target="_blank" rel="external">http://eloquentjavascript.net/</a></li>
<li>John Resig编写的Advanced JavaScript：<a href="http://ejohn.org/apps/learn/" target="_blank" rel="external">http://ejohn.org/apps/learn/</a></li>
</ul>
<blockquote>
<p>除了第45条推荐的网站外，文中很多参考链接的阅读价值都很大，喜欢的朋友可以深入阅读。由于本人的技术有限，文中可能有些许错误，希望大家能够提出改正，不胜感激！</p>
</blockquote>

    
  </div>
</div>


    <section id="comment">
        <!-- 多说评论框 start -->
            <div class="ds-thread" data-thread-key="/2015/01/07/JavaScript奇技淫巧45招/" data-title="JavaScript奇技淫巧45招" data-url="http://blog.nokey.me/2015/01/07/JavaScript奇技淫巧45招/"></div>
        <!-- 多说评论框 end -->
    </section>

    </div>
    <footer>
    <img alt="Nokey" data-url="http://blog-nokey.qiniudn.com/matrix.jpg" data-url-640="http://blog-nokey.qiniudn.com/blog_foot1.jpg!image640" data-url-320="http://blog-nokey.qiniudn.com/blog_foot1.jpg!image320">
    <div class="i-want-say"></div>
    <div class="qq-chat">QQ群：461790451</div>
</footer>
<div class="to-top icon-rocket" id="to_top"></div>

    
    <script src="/js/jquery-1.11.1.js" type="text/javascript"></script>

<script src="/js/blog.js" type="text/javascript"></script>

<script src="/js/head.min.js" type="text/javascript"></script>

<script src="/js/snowfall.jquery.js" type="text/javascript"></script>


<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"nokey"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->
<script>
function merry_christmas(){
    $(document).snowfall('clear');    
    $(document).snowfall({
        flakeCount: 50,
        minSize: 12,
        maxSize: 32
    });
}
// merry_christmas();
</script>
</body>
</html>