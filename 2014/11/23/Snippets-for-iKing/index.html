<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>
        
            Snippets for iKing&#39;s 1 |
        －木马人－    
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta http-equiv="cache-control" content="max-age=7200">
    <!-- 禁止百度微信转码（移动端还有点人性，哈哈） -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- 作者 -->
    <meta name="author" content="Nokey-木马人">
    <meta name="baidu-site-verification" content="lmqYZpJ2tZ" />
    <link rel="icon" type="image/x-icon" href="/image/king.png">
    <link rel="stylesheet" href="/css/blog.css" type="text/css">

    <link rel="stylesheet" href="/css/post.css" type="text/css">

    <link rel="stylesheet" href="/css/noookey.css" type="text/css">

    <link rel="stylesheet" href="/css/highlight.css" type="text/css">

  </head>
<body>
    <div id='wx_pic' style='margin:0 auto;display:none;'>
    <img src='/image/nokey.png'/>
</div>
<header>
    <i class="left">
        <span class="dash-left transition">--</span>
        <span class="word-w transition">W</span>
        <span class="word-e transition">e</span>
        <span class="word-l transition">l</span>
        <span class="word-c transition">c</span>
        <span class="word-o transition">o</span>
        <span class="word-m transition">m</span>
        <span class="word-e transition">e </span>
        <span class="word-t transition">t</span>
        <span class="word-o transition">o </span>
    </i>
    <a href="/pages/shanghai"><span class="word-n transition">N</span></a>
    <span class="word-o transition">o</span>
    <span class="word-k transition">k</span>
    <span class="word-e transition">e</span>
    <span class="word-y transition">y</span>
    <span class="word-_ transition">_</span>
    <span class="word-b transition">b</span>
    <span class="word-l transition">l</span>
    <span class="word-o transition">o</span>
    <span class="word-g transition">g </span>
    <i class="right">
        <span class="dash-right transition">--</span>
    </i>
    
    <p class="home">
        <a href="/" title="Return Home">
            <i class="icon-home transition" alt="Return Home"></i>
        </a>
    </p>
</header>
<div class="yellow-progress-bar progress-move"></div>
    <div class="main">
        <div class="one">
  <a href="http://blog.nokey.me/2014/11/23/Snippets-for-iKing/">
    <h1 class="p-title transition">Snippets for iKing&#39;s 1</h1>
</a>

  <div class="micro-data clearfix">
    <div class="date-wrap wrap">
        <i class="icon-calendar"></i>
        <span class="date">11月 23 2014</span>
    </div>
    <div class="tag-wrap wrap">
        
    <i class="icon-tag"></i>
    <a class="post-link" href="/tags/html/">html</a>&nbsp;&nbsp;<a class="post-link" href="/tags/javascript/">javascript</a>&nbsp;&nbsp;<a class="post-link" href="/tags/plugin/">plugin</a>

    </div>
</div>

  <div class="content">
    
        <p><strong>在 <em>Snippets</em> 系列文章里，我会整理一些我自己写的插件，慢慢学习，慢慢进步</strong></p>
<p>###一、一个图片轮播插件：</p>
<p><div id="cb_index"><br>    <div class="main-box"><br>        <div class="slide-panel"><br>            <ul class="wrapper translate3D"><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_4.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－4<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_5.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－5<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_1.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－1<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_2.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－2<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_3.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－3<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_4.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－4<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_5.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－5<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_1.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－1<br>                    </div></a><br>                </li><br>                <li class="one"><br>                    <a href="javascript:;" target="_blank" rel="external"><br>                        <img src="http://7qnc7c.com1.z0.glb.clouddn.com/blog_2.jpg" alt="牧马人" title="牧马人"><br>                    </a><br>                    <a href="#"><div class="title"><br>                        牧马人－2<br>                    </div></a><br>                </li><br>            </ul><br>            <div class="arrow left transition"><br>                <i class="icon-chevron-left"></i><br>            </div><br>            <div class="arrow right transition"><br>                <i class="icon-chevron-right"></i><br>            </div><br>            <div class="mask-l"></div><br>            <div class="mask-r"></div><br>        </div><br>    </div><br></div></p>
<script>

</script>

<a id="more"></a>
<p>###二、简单的检测浏览器内核：</p>
<figure class="highlight js"><pre><div class="line"><span class="comment">//browser</span></div><div class="line"><span class="keyword">var</span></div><div class="line">  isFirefox = <span class="regexp">/firefox/</span>.test(navigator.userAgent.toLowerCase()),</div><div class="line">  isWebkit = <span class="regexp">/webkit/</span>.test(navigator.userAgent.toLowerCase()),</div><div class="line">  isOpera = <span class="regexp">/opera/</span>.test(navigator.userAgent.toLowerCase()),</div><div class="line">  isMsie = <span class="regexp">/msie/</span>.test(navigator.userAgent.toLowerCase());</div></pre></figure>

<p>###三、简单的滚动插件（还差一个滚动条）：</p>
<p><div class="wheel-wrap"><br>    <div class="wheel-panel"><br>没错，我大四了，没有考研，所以，这个是学生时代最后一个寒假了。<br>自己慢慢地感觉到了压力，面对现实的压力，我不得不每天都警告自己，毕业即将来临，也必须为自己的生活而努力。其实自己还是有点小梦想的，想住进像爱情公寓那样的房子，然后买一套《恋爱潜规则》里面的公寓，不过得先在一个企业文化好的公司工作。毕业后我特想去豆瓣工作，而且豆瓣还在798，工作氛围自由、创新，我挺喜欢的，我有信心，也相信自己的实力，但是，在技术上我还有一定的欠缺，所以这个寒假，我要把自己比较喜欢的技术打好基础，虽然只是自己一个人在学，但，我还是要坚持。<br>今天是在家的第5天了，作息时间自己还算满意，本来是想在Ubuntu上学Python，结果这几天只顾搞ubuntu，各种黑屏，重装，配置vim环境，安装一些必备的软件，今天，本来不支持13.10的Wubi突然给我安装了13.10！着实让我小感动了一把。偶尔玩一局LOL，练练腹肌。可是我还是不够静下心来，而我又付出了多少努力呢？<br>我相信天才，但我也相信我不是天才，我也有着人的惰性，我只是还没找到真正的自己，在这段没有意义的生命里找到自己的意义。我一直都是这样，喜欢却不是特别喜欢，但却能一直维持着这种喜欢的感觉，我敢面对真实的自己，可是看不透真正的自己。<br>勇敢的前行，开始寻找自己。<br>    </div><br></div></p>
<script>

</script>

<p>###四、简单的飞图 <em>code</em></p>
<p><div class="image fly-img"><br>    <img src="http://blog-nokey.qiniudn.com/blog_matrix1.jpg" alt="Fly Img"><br></div></p>
<script>

</script>

<p>###五、简单的输入框字数限制 <em>Code</em></p>
<figure class="highlight js"><pre><div class="line"><span class="comment">// 字数限制工具函数</span></div><div class="line">$(<span class="string">'.word-num-limit'</span>).on(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>{</div><div class="line">  event.preventDefault();</div><div class="line">  <span class="keyword">var</span> _me = $(<span class="keyword">this</span>),</div><div class="line">      _val = _me.val(),</div><div class="line">      _max = <span class="built_in">parseInt</span>(_me.attr(<span class="string">'data-max-words'</span>));</div><div class="line">  <span class="comment">// console.log(_me.val());</span></div><div class="line">  <span class="keyword">if</span>(_val.length &gt; _max){</div><div class="line">      _me.val(_val.slice(<span class="number">0</span>, _max));</div><div class="line">  }</div><div class="line">});</div></pre></figure>

<p>这段代码需要给元素添加一个微数据<em>data-max-words</em>，并添加一个 Class <em>word-num-limit</em></p>
<p>###六、一段发布时间的 <em>Code</em> （不带自动刷新功能。。。）</p>
<figure class="highlight js"><pre><div class="line"><span class="comment">// publish func tools(eg. published 1 second before)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">publishDate</span><span class="params">(s)</span></span>{</div><div class="line">  <span class="keyword">var</span> _date = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    _s = <span class="built_in">Math</span>.ceil(_date.getTime() / <span class="number">1000</span>),</div><div class="line">    _dif = _s - s,</div><div class="line">    _T0 = (<span class="function"><span class="keyword">function</span><span class="params">(d)</span></span>{</div><div class="line">        <span class="keyword">return</span> _s - d.getSeconds() - d.getMinutes()*<span class="number">60</span> - d.getHours()*<span class="number">3600</span>;</div><div class="line">    }(_date)),</div><div class="line">    _Y0 = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">        <span class="keyword">return</span> _T0 - <span class="number">24</span> * <span class="number">3600</span>;</div><div class="line">    }()),</div><div class="line">    _B0 = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">        <span class="keyword">return</span> _Y0 - <span class="number">24</span> * <span class="number">3600</span>;</div><div class="line">    }()),</div><div class="line">    _filter = {</div><div class="line">      S1_59:  <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(_dif &gt;= <span class="number">1</span> && _dif &lt; <span class="number">60</span>) <span class="keyword">return</span> _dif + <span class="string">'秒前'</span>;</div><div class="line">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      },</div><div class="line">      M1_60: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(_dif &gt;=<span class="number">60</span> && _dif &lt; <span class="number">3600</span>) <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(_dif / <span class="number">60</span>) + <span class="string">'分钟前'</span>;</div><div class="line">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      },</div><div class="line">      H1_24: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(_dif &gt;= <span class="number">3600</span> && _dif &lt; <span class="number">86400</span>) <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(_dif / <span class="number">3600</span>) + <span class="string">'小时前'</span>;</div><div class="line">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      },</div><div class="line">      Y: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(s &gt;= _Y0 && s &lt; _T0) <span class="keyword">return</span> <span class="string">'昨天'</span>;</div><div class="line">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      },</div><div class="line">      BY: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(s &gt;= _B0 && s &lt; _Y0) <span class="keyword">return</span> <span class="string">'前天'</span>;</div><div class="line">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      },</div><div class="line">      D: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">          <span class="keyword">if</span>(s &lt; _B0 && s &gt;=<span class="number">0</span>){</div><div class="line">              <span class="keyword">var</span> ago = <span class="keyword">new</span> <span class="built_in">Date</span>(s * <span class="number">1000</span>);</div><div class="line">              <span class="keyword">return</span> ago.getFullYear()+ <span class="string">'年'</span>+ ago.getMonth()+ <span class="string">'月'</span>+ ago.getDate()+ <span class="string">'日'</span>;</div><div class="line">          }<span class="keyword">else</span>{</div><div class="line">              <span class="keyword">return</span> <span class="string">'000：时空错乱了！'</span>;</div><div class="line">          }</div><div class="line">      }</div><div class="line">    };</div><div class="line">  <span class="comment">// console.log(_filter.D());</span></div><div class="line">  <span class="keyword">return</span> _filter.S1_59() || _filter.M1_60() || _filter.H1_24() || _filter.Y() || _filter.BY() || _filter.D();</div><div class="line">};</div><div class="line"></div><div class="line">Usage:</div><div class="line"></div><div class="line">    <span class="built_in">console</span>.log(publishDate(<span class="built_in">parseInt</span>((<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime()/<span class="number">1000</span>)));</div></pre></figure>

<p>###七、基于 <em>Ajax</em> 的分页前端代码：</p>
<p><div><br>  <ul class="page-num no-select" data-max-page="10"><br>      <div class="num-panel"><br>          s<br>      </div><br>  </ul><br></div></p>
<script>
function invokeHere(iH_opts){
    // Slider
    var 
        cb_index = $('#cb_index'),
        slider_opt = {
            time: 500,
            autoplay: false,
            panel: cb_index.find('.slide-panel'),
            wrapper: cb_index.find('.wrapper'),
            one_w: cb_index.find('.slide-panel').width(),
            h_div_w: 0.6,
            num: cb_index.find('.one').length - 4,
            left_btn: cb_index.find('.main-box .left'),
            right_btn: cb_index.find('.main-box .right')
        };
    var cb_slider = new iH_opts.Slider(slider_opt);
    cb_slider.adapt().start();
    $(window).resize(function(){
        cb_slider.adapt();
    });

    // Wheel
    var 
        wheel_opt = {
            able_w_h: $('.wheel-panel')[0].offsetHeight - $('.wheel-wrap')[0].offsetHeight,
            w_dis: 50,
            w_panel: $('.wheel-panel'),
            origin_top: parseInt($('.wheel-panel').css('top')),
            time: 200
        },
        sub_nav_wheel = new iH_opts.Wheel(wheel_opt);

    $('.wheel-wrap').addWheelEvent({
        handler: function(down, e){
            down ? sub_nav_wheel.wheelDown() : sub_nav_wheel.wheelUp();
        }
    });

    // Fly img
    var 
        fly_opt = {
            'target': $('.to-top')[0]
        },
        airfly = new iH_opts.FlyImg(fly_opt);
    console.log(airfly);
    $('.fly-img').on('click', 'img', function(event) {
        var _img = event.target;
        console.log(_img);
        airfly.boarding(_img).fly();
    });

    // Pagination
    var 
        // Extra Data
        extra_data = {
        },
        // update eles
        $page_panel = null,
        loadingHTML = '',
        opt = {
            url: '',
            range: 5,
            wrap: $('.page-num').find('.num-panel'),
            max_page: parseInt($('.page-num').attr('data-max-page')),
            updateContent: function(data, page_panel){  // 更新图片内容
                // var content = '';
                // for (var i = 0; i < data.length; i++) {
                //     content += data;
                // };
                // page_panel.html(content);
            },
            beforeSend: function(){
                // beforesend...清除当前页的内容，显示 Loading，跳到最顶部，并隐藏页码区
                // $page_panel.html(loadingHTML);
                // $('html, body').animate({scrollTop: 395}, 200);
                // Hide pagination
                $('.num-panel').css('display', 'none');
            },
            sendComplete: function(){
                // Show pagination
                $('.num-panel').css('display', 'block');
            }
        },
        pageXHR = new iH_opts.Pagination(opt);

    // Init the first page
    pageXHR.init(function(){
        pageXHR.updateNum(pageXHR.paged);
    });

    // This is a page num switch Proxy
    $('.num-panel').on('click', 'li, span', function(event) {
        var $target = $(event.target);

        if(!($target.hasClass('current') || $target.hasClass('disable'))){
            if($target.is('li')){
                console.log('li');
                // get page num from <li>
                pageXHR.paged = parseInt($target.attr('data-page'));
            }else if($target.is('span')){
                // get page num from <span>, Judge it's prev page or next page
                $target.hasClass('prev') ? pageXHR.paged -= 1 : pageXHR.paged += 1;
            }
            // request pagination
            // pageXHR.xhrPage(pageXHR.paged, $page_panel, extra_data);
            pageXHR.updateNum(pageXHR.paged);
        }
    });
}
</script>



    
  </div>
</div>


    <section id="comment">
        <!-- 多说评论框 start -->
            <div class="ds-thread" data-thread-key="/2014/11/23/Snippets-for-iKing/" data-title="Snippets for iKing&#39;s 1" data-url="http://blog.nokey.me/2014/11/23/Snippets-for-iKing/"></div>
        <!-- 多说评论框 end -->
    </section>

    </div>
    <footer>
    <img alt="Nokey" data-url="http://blog-nokey.qiniudn.com/matrix.jpg" data-url-640="http://blog-nokey.qiniudn.com/blog_foot1.jpg!image640" data-url-320="http://blog-nokey.qiniudn.com/blog_foot1.jpg!image320">
    <div class="i-want-say"></div>
    <div class="qq-chat">QQ群：461790451</div>
</footer>
<div class="to-top icon-rocket" id="to_top"></div>

    
    <script src="/js/jquery-1.11.1.js" type="text/javascript"></script>

<script src="/js/blog.js" type="text/javascript"></script>

<script src="/js/head.min.js" type="text/javascript"></script>

<script src="/js/snowfall.jquery.js" type="text/javascript"></script>


<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"nokey"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->
<script>
function merry_christmas(){
    $(document).snowfall('clear');    
    $(document).snowfall({
        flakeCount: 50,
        minSize: 12,
        maxSize: 32
    });
}
// merry_christmas();
</script>
</body>
</html>